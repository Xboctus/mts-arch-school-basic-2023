# ADR001.Внутрисистемная интеграция
<!-- Название ADR состоит из [ADR.###] [Коротко суть принятого решения] -->

* Статус: Предложено
* Владелец: aipodolski@mts.ru

## Контекст
<!-- Описание проблемы, требующей решения, причин, побудивших принять решение, ограничений, действовавших на момент принятия решения -->
В рамках системы необходимо взаимодействие между UI компонентами и backend сервисами. 

## Варианты решения
<!-- Описание рассмотренных вариантов c их плюсами и минусами -->
В рамках данного решения будет 

Сравнение вариантов приведено в соответсвие со шкалой: 
* 0 - полностью не удовлетворяет
* 1 - частично удовлетворяет
* 2 - удовлетворяет большинство подребностей
* 3 - полностью удовлетворяет 

Сравнение будет проходить по следующим критериям:
* Кастомизация формата данных
* Удобство разработки UI
* Удобство разработки backend
* Быстродействие
* Поддержка браузерами

### Вариант 1. REST
<!-- Описание варианта 1 -->

| Критерий                         | Описание                                                 | Оценка   |
|----------------------------------|----------------------------------------------------------|----------|
| Кастомизация формата данных      | Данные можно передавать в любом удобном формате          | 3        |
| Удобство разработки UI           | Есть множество бибилиотек, поддерживающих концепцию      | 3        |
| Удобство разработки backend      | Есть множество бибилиотек, поддерживающих концепцию      | 3        |
| Быстродействие                   | Достаточное быстродействие при ограниченной нагрузке     | 2        |
| Поддержка браузерами             | Полностью поддерживается всеми современными браузерами   | 3        |
| -------------------------------- | -------------------------------------------------------- | -------- |
| Итог:                            |                                                          | 14       |

### Вариант 2. GraphQL
<!-- Описание варианта 2 -->
| Критерий                       | Описание                                                 | Оценка   |
|--------------------------------|----------------------------------------------------------|----------|
| Кастомизация формата данных    | Собственный язык запросов                                | 1        |
| Удобство разработки UI         | Есть необходимые библиотеки                              | 2        |
| Удобство разработки backend    | Есть множество бибилиотек, поддерживающих концепцию      | 3        |
| Быстродействие                 | Достаточное быстродействие при ограниченной нагрузке     | 1        |
| Поддержка браузерами           | Полностью поддерживается всеми современными браузерами   | 3        |
| -------------------------------| -------------------------------------------------------- | -------- |
| Итог:                          |                                                          | 10       |

### Вариант 3. gRPC
<!-- Описание варианта 2 -->
| Критерий                       | Описание                                                    | Оценка   |
|--------------------------------|-------------------------------------------------------------|----------|
| Кастомизация формата данных    | Фиксированный формат protobuf                               | 1        |
| Удобство разработки UI         | Библиотек мало                                              | 1        |
| Удобство разработки backend    | Есть необходимые библиотеки                                 | 2        |
| Быстродействие                 | Лучшая производителность                                    | 3        |
| Поддержка браузерами           | Необходимо дополнительно расширять приложение для поддержки | 1        |
| -------------------------------| --------------------------------------------------------    | -------- |
| Итог:                          |                                                             | 8        |

## Решение
<!-- Описание выбранного решения. Решение должно быть сформулировано чётко ("Мы используем...", "Мы не используем", а не "Желательно.." или "Предлагается..."). 
Должна быть понятна связь между решением и проблемой, почему выбрали именно это решение из вариантов -->
В рамках данной системы для взаимодействия UI и backend будет использован подход с синхронной связью, с использованием концепции REST. Сервисы будут интегрированны в рамках p2p схемы подключения.

## Последствия
<!-- Положительные и отрицательные последствия (trade-offs). Арх. решения, которые потребуется принять как следствие принятого решения. Если решение содержит риски, то описано, как с ними планируют поступить (за счет чего снижать, почему принять). -->
* Упрощается отладка - человеко-читаемый протокол
* Быстродействие на прогнозируемые объемы данных - достаточное.