# ADR002.Система хранения данных
<!-- Название ADR состоит из [ADR.###] [Коротко суть принятого решения] -->

* Статус: Предложено
* Владелец: aipodolski@mts.ru

## Контекст
<!-- Описание проблемы, требующей решения, причин, побудивших принять решение, ограничений, действовавших на момент принятия решения -->
В рамках системы необходимо хранение различных типов данных - длительный срок хранения, структурированные данные, к которым часто обращаются в течении 3-4 месяцев. 

## Варианты решения
<!-- Описание рассмотренных вариантов c их плюсами и минусами -->


### Вариант 1. SQL database (ACID/CA) - PostgreSQL
<!-- Описание варианта 1 -->
С точки зрения CAP теоремы, нам необходимы данные, которые будут доступны и консистентны. В рамках системы нет необходимости в "больших данных" - кол-во сущностей в рамках одной конференции будет измеряться тысячами (и большая часть из них будут слушателями\обратной связью от слушателей).
* **Плюсы**
  * Данные чётко структурированны в соответсвии с моделью
  * Соблюдается ACID - что немаловажно в рамках работы с докладами
* **Минусы**
  * Невозможно масшатбировать - в условиях ограниченного количества пользователей не является критичным

### Вариант 2. NoSQL database (BASE/CP) - MongoDB
<!-- Описание варианта 2 -->
С точки зрения CAP теоремы, нам необходимы данные, которые будут доступны и консистентны. В рамках системы нет необходимости в "больших данных" - кол-во сущностей в рамках одной конференции будет измеряться тысячами (и большая часть из них будут слушателями\обратной связью от слушателей).
* **Плюсы**
  * Высокая пропускная способность
  * Возможность распределенного хранения\работы с данными.
* **Минусы**
  * Данные могут быть иногда недоступны, что противоречит архитектуре решения
  * Структурирование данных вынесено за пределы хранилища, дополнительные затраты на поддержание структуры

## Решение
<!-- Описание выбранного решения. Решение должно быть сформулировано чётко ("Мы используем...", "Мы не используем", а не "Желательно.." или "Предлагается..."). 
Должна быть понятна связь между решением и проблемой, почему выбрали именно это решение из вариантов -->
Хранение данных в рамках предложенной модели будет осуществляться на PostgreSQL на основании критериев доступности, структурированности и консистентности.

## Последствия
<!-- Положительные и отрицательные последствия (trade-offs). Арх. решения, которые потребуется принять как следствие принятого решения. Если решение содержит риски, то описано, как с ними планируют поступить (за счет чего снижать, почему принять). -->
При необходимости хранения записей конференций в рамках системы - потребуется отдельное хранилище для подобного типа данных (S3).